"use strict";var source=(()=>{var ce=Object.create;var q=Object.defineProperty;var de=Object.getOwnPropertyDescriptor;var le=Object.getOwnPropertyNames;var fe=Object.getPrototypeOf,pe=Object.prototype.hasOwnProperty;var o=(e,i)=>()=>(i||e((i={exports:{}}).exports,i),i.exports),ge=(e,i)=>{for(var t in i)q(e,t,{get:i[t],enumerable:!0})},F=(e,i,t,r)=>{if(i&&typeof i=="object"||typeof i=="function")for(let n of le(i))!pe.call(e,n)&&n!==t&&q(e,n,{get:()=>i[n],enumerable:!(r=de(i,n))||r.enumerable});return e};var _e=(e,i,t)=>(t=e!=null?ce(fe(e)):{},F(i||!e||!e.__esModule?q(t,"default",{value:e,enumerable:!0}):t,e)),be=e=>F(q({},"__esModule",{value:!0}),e);var J=o(G=>{"use strict";Object.defineProperty(G,"__esModule",{value:!0})});var L=o(h=>{"use strict";var he=h&&h.__createBinding||(Object.create?function(e,i,t,r){r===void 0&&(r=t);var n=Object.getOwnPropertyDescriptor(i,t);(!n||("get"in n?!i.__esModule:n.writable||n.configurable))&&(n={enumerable:!0,get:function(){return i[t]}}),Object.defineProperty(e,r,n)}:function(e,i,t,r){r===void 0&&(r=t),e[r]=i[t]}),ve=h&&h.__exportStar||function(e,i){for(var t in e)t!=="default"&&!Object.prototype.hasOwnProperty.call(i,t)&&he(i,e,t)};Object.defineProperty(h,"__esModule",{value:!0});ve(J(),h)});var K=o(S=>{"use strict";Object.defineProperty(S,"__esModule",{value:!0});S.MochiRequestMethod=void 0;var Z;(function(e){e.get="get",e.post="post",e.put="put",e.patch="patch"})(Z||(S.MochiRequestMethod=Z={}))});var Y=o(v=>{"use strict";var ye=v&&v.__createBinding||(Object.create?function(e,i,t,r){r===void 0&&(r=t);var n=Object.getOwnPropertyDescriptor(i,t);(!n||("get"in n?!i.__esModule:n.writable||n.configurable))&&(n={enumerable:!0,get:function(){return i[t]}}),Object.defineProperty(e,r,n)}:function(e,i,t,r){r===void 0&&(r=t),e[r]=i[t]}),Pe=v&&v.__exportStar||function(e,i){for(var t in e)t!=="default"&&!Object.prototype.hasOwnProperty.call(i,t)&&ye(i,e,t)};Object.defineProperty(v,"__esModule",{value:!0});Pe(K(),v)});var A=o(y=>{"use strict";var me=y&&y.__createBinding||(Object.create?function(e,i,t,r){r===void 0&&(r=t);var n=Object.getOwnPropertyDescriptor(i,t);(!n||("get"in n?!i.__esModule:n.writable||n.configurable))&&(n={enumerable:!0,get:function(){return i[t]}}),Object.defineProperty(e,r,n)}:function(e,i,t,r){r===void 0&&(r=t),e[r]=i[t]}),Oe=y&&y.__exportStar||function(e,i){for(var t in e)t!=="default"&&!Object.prototype.hasOwnProperty.call(i,t)&&me(i,e,t)};Object.defineProperty(y,"__esModule",{value:!0});Oe(Y(),y)});var H=o(c=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0});c.PlaylistEpisodeServerSkipType=c.PlaylistEpisodeServerSubtitleFormat=c.PlaylistEpisodeServerFormatType=c.PlaylistEpisodeServerQualityType=void 0;var V;(function(e){e[e.auto=0]="auto",e[e.q360p=1]="q360p",e[e.q480p=2]="q480p",e[e.q720p=3]="q720p",e[e.q1080p=4]="q1080p"})(V||(c.PlaylistEpisodeServerQualityType=V={}));var W;(function(e){e[e.hsl=0]="hsl",e[e.dash=1]="dash"})(W||(c.PlaylistEpisodeServerFormatType=W={}));var z;(function(e){e[e.vtt=0]="vtt",e[e.ass=1]="ass",e[e.srt=2]="srt"})(z||(c.PlaylistEpisodeServerSubtitleFormat=z={}));var C;(function(e){e[e.opening=0]="opening",e[e.ending=1]="ending",e[e.recap=2]="recap"})(C||(c.PlaylistEpisodeServerSkipType=C={}))});var T=o(P=>{"use strict";var je=P&&P.__createBinding||(Object.create?function(e,i,t,r){r===void 0&&(r=t);var n=Object.getOwnPropertyDescriptor(i,t);(!n||("get"in n?!i.__esModule:n.writable||n.configurable))&&(n={enumerable:!0,get:function(){return i[t]}}),Object.defineProperty(e,r,n)}:function(e,i,t,r){r===void 0&&(r=t),e[r]=i[t]}),we=P&&P.__exportStar||function(e,i){for(var t in e)t!=="default"&&!Object.prototype.hasOwnProperty.call(i,t)&&je(i,e,t)};Object.defineProperty(P,"__esModule",{value:!0});we(H(),P)});var X=o(m=>{"use strict";var qe=m&&m.__createBinding||(Object.create?function(e,i,t,r){r===void 0&&(r=t);var n=Object.getOwnPropertyDescriptor(i,t);(!n||("get"in n?!i.__esModule:n.writable||n.configurable))&&(n={enumerable:!0,get:function(){return i[t]}}),Object.defineProperty(e,r,n)}:function(e,i,t,r){r===void 0&&(r=t),e[r]=i[t]}),Se=m&&m.__exportStar||function(e,i){for(var t in e)t!=="default"&&!Object.prototype.hasOwnProperty.call(i,t)&&qe(i,e,t)};Object.defineProperty(m,"__esModule",{value:!0});Se(T(),m)});var ie=o(u=>{"use strict";Object.defineProperty(u,"__esModule",{value:!0});u.PlaylistPreviewType=u.PlaylistType=u.PlaylistStatus=u.DiscoverListingOrientationType=u.DiscoverListingType=void 0;var Q;(function(e){e[e.default=0]="default",e[e.rank=1]="rank",e[e.featured=2]="featured"})(Q||(u.DiscoverListingType=Q={}));var x;(function(e){e[e.portrait=0]="portrait",e[e.landscape=1]="landscape"})(x||(u.DiscoverListingOrientationType=x={}));var k;(function(e){e[e.unknown=0]="unknown",e[e.upcoming=1]="upcoming",e[e.ongoing=2]="ongoing",e[e.completed=3]="completed",e[e.paused=4]="paused",e[e.cancelled=5]="cancelled"})(k||(u.PlaylistStatus=k={}));var ee;(function(e){e[e.video=0]="video",e[e.image=1]="image",e[e.text=2]="text"})(ee||(u.PlaylistType=ee={}));var te;(function(e){e[e.video=0]="video",e[e.image=1]="image"})(te||(u.PlaylistPreviewType=te={}))});var re=o(l=>{"use strict";var Ie=l&&l.__createBinding||(Object.create?function(e,i,t,r){r===void 0&&(r=t);var n=Object.getOwnPropertyDescriptor(i,t);(!n||("get"in n?!i.__esModule:n.writable||n.configurable))&&(n={enumerable:!0,get:function(){return i[t]}}),Object.defineProperty(e,r,n)}:function(e,i,t,r){r===void 0&&(r=t),e[r]=i[t]}),Me=l&&l.__exportStar||function(e,i){for(var t in e)t!=="default"&&!Object.prototype.hasOwnProperty.call(i,t)&&Ie(i,e,t)};Object.defineProperty(l,"__esModule",{value:!0});l.SourceModule=void 0;Me(ie(),l);var D=class{};l.SourceModule=D});var ne=o(I=>{"use strict";Object.defineProperty(I,"__esModule",{value:!0});I.TrackerModule=void 0;var $=class{constructor(){this.metadata={}}};I.TrackerModule=$});var se=o(g=>{"use strict";var Be=g&&g.__createBinding||(Object.create?function(e,i,t,r){r===void 0&&(r=t);var n=Object.getOwnPropertyDescriptor(i,t);(!n||("get"in n?!i.__esModule:n.writable||n.configurable))&&(n={enumerable:!0,get:function(){return i[t]}}),Object.defineProperty(e,r,n)}:function(e,i,t,r){r===void 0&&(r=t),e[r]=i[t]}),ae=g&&g.__exportStar||function(e,i){for(var t in e)t!=="default"&&!Object.prototype.hasOwnProperty.call(i,t)&&Be(i,e,t)};Object.defineProperty(g,"__esModule",{value:!0});ae(re(),g);ae(ne(),g)});var oe=o(d=>{"use strict";var De=d&&d.__createBinding||(Object.create?function(e,i,t,r){r===void 0&&(r=t);var n=Object.getOwnPropertyDescriptor(i,t);(!n||("get"in n?!i.__esModule:n.writable||n.configurable))&&(n={enumerable:!0,get:function(){return i[t]}}),Object.defineProperty(e,r,n)}:function(e,i,t,r){r===void 0&&(r=t),e[r]=i[t]}),M=d&&d.__exportStar||function(e,i){for(var t in e)t!=="default"&&!Object.prototype.hasOwnProperty.call(i,t)&&De(i,e,t)};Object.defineProperty(d,"__esModule",{value:!0});M(L(),d);M(A(),d);M(X(),d);M(se(),d)});var Ne={};ge(Ne,{default:()=>B,parsePageListing:()=>ue});var a=_e(oe()),f="pipedapi.kavin.rocks",B=class extends a.SourceModule{constructor(){super(...arguments);this.metadata={name:"YouTube",version:"1.0.0",icon:"https://i.ibb.co/25tW4sZ/youtube.png"}}async searchFilters(){throw new Error("Method not implemented.")}async search(t){let r;r=encodeURI(`https://${f}/search?q=${t.query}&filter=all`);let n=await request.get(r);return ue(n.json())}async discoverListings(){let t=await request.get(`https://${f}/trending?region=US`),r=await request.get(`https://${f}/trending?region=GB`),n=await request.get(`https://${f}/trending?region=IN`),O=await request.get(`https://${f}/trending?region=NZ`),_=t.json(),b=r.json(),p=n.json(),j=O.json(),w=47,N=[],U=[],R=[],E=[];for(let s=0;s<w;s++)N.push({id:_[s].uploaderUrl??"",title:_[s].uploaderName,posterImage:_[s].thumbnail,bannerImage:void 0,url:_[s].url,status:a.PlaylistStatus.unknown,type:a.PlaylistType.video});for(let s=0;s<w;s++)U.push({id:b[s].uploaderUrl??"",title:b[s].uploaderName,posterImage:b[s].thumbnail,bannerImage:void 0,url:b[s].url,status:a.PlaylistStatus.unknown,type:a.PlaylistType.video});for(let s=0;s<w;s++)R.push({id:p[s].uploaderUrl??"",title:p[s].uploaderName,posterImage:p[s].thumbnail,bannerImage:void 0,url:p[s].url,status:a.PlaylistStatus.unknown,type:a.PlaylistType.video});for(let s=0;s<w;s++)E.push({id:j[s].uploaderUrl??"",title:j[s].uploaderName,posterImage:j[s].thumbnail,bannerImage:void 0,url:j[s].url,status:a.PlaylistStatus.unknown,type:a.PlaylistType.video});return[{id:"Featured",title:"Featured",type:a.DiscoverListingType.featured,orientation:a.DiscoverListingOrientationType.landscape,paging:{id:"0",items:N}},{id:"Featured UK",title:"UK",type:a.DiscoverListingType.default,orientation:a.DiscoverListingOrientationType.landscape,paging:{id:"0",items:U}},{id:"Featured India",title:"India",type:a.DiscoverListingType.default,orientation:a.DiscoverListingOrientationType.landscape,paging:{id:"0",items:R}},{id:"Featured New Zealand",title:"New Zealand",type:a.DiscoverListingType.default,orientation:a.DiscoverListingOrientationType.landscape,paging:{id:"0",items:E}}]}async playlistDetails(t){return{synopsis:(await(await request.get(`https://${f}${t.toString()}`)).json()).description??"",altTitles:[],altPosters:[],altBanners:[],genres:[],previews:[]}}async playlistEpisodes(t){let n=await(await request.get(`https://${f}${t.toString()}`)).json(),O=1;return[{id:"1",number:1,variants:[{id:"1",title:"",pagings:[{id:"",items:n.relatedStreams.map(p=>({id:p.url,title:$e(p.title.toString(),23),thumbnail:p.thumbnail.toString(),number:O++,tags:[]}))}]}]}]}async playlistEpisodeSources(t){let r=t.episodeId.toString().substring(t.episodeId.indexOf("/watch?v=")+9);return console.log(r),[{id:"servers",description:"YouTube",servers:[{id:r,displayName:"Piped"}],displayName:"YouTube"}]}async playlistEpisodeServer(t){let n=await(await request.get(`https://${f}/streams/${t.serverId.toString()}`)).json();return console.log(`https://${f}/streams/${t.serverId.toString()}`),console.log(n.hls),{links:[{url:n.hls,quality:a.PlaylistEpisodeServerQualityType.auto,format:a.PlaylistEpisodeServerFormatType.hsl}],subtitles:[],skipTimes:[],headers:{}}}},ue=e=>{let i=[];return e.items.filter(r=>r.type==="channel").forEach(r=>{let n=r.uploaderUrl??r.url,O=r.title??r.name,_=r.thumbnail,b=r.url;i.push({id:n,title:O,posterImage:_,url:b,status:a.PlaylistStatus.ongoing,type:a.PlaylistType.video})}),{id:"1",previousPage:void 0,nextPage:e.hasNextPage?"2":void 0,title:`Page ${e.currentPage}`,items:i}};function $e(e,i){return e.length>i?e.slice(0,i)+"...":e}return be(Ne);})();
